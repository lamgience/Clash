# =======================================================
# Clash Verge / Mihomo 旗舰级配置文件 (Rev. 2026)
# =======================================================
# 核心架构：
# 1. 模块化设计：使用 YAML 锚点 (Anchors) 复用策略，修改一处即可全局生效
# 2. 智能分流：
#    - AI 服务：强制优选美国 > 日本 > 新加坡节点
#    - 流媒体：自动测速与手动选择双重保障
#    - DNS：国内外精准分流，防污染且速度快
# 3. 自动维护：正则 (Regex) 自动从订阅中提取节点到对应国家组
# =======================================================

# ==================== 1. 内核基础设置 (Base) ====================
mode: rule
mixed-port: 7897
allow-lan: false
log-level: info
ipv6: true
unified-delay: true
# 进程匹配模式：Strict (严格)
# 作用：解决 Android/PC 上部分应用无法正确匹配进程名导致分流失败的问题
find-process-mode: strict
# TLS 指纹模拟：Chrome
# 作用：模拟浏览器指纹，防止被 Cloudflare 等防火墙识别为机器人而阻断连接
global-client-fingerprint: chrome

# ==================== 2. DNS 深度优化 (Split-DNS) ====================
dns:
  enable: true
  listen: :53
  ipv6: true
  # 模式：Fake-IP (增强模式)
  # 作用：返回虚拟 IP 秒开网页，解决 DNS 污染，并在本地缓存映射关系
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  # Fake-IP 过滤列表
  # 作用：以下域名强制走真实 DNS 解析，解决局域网、连通性测试、STUN 等兼容性问题
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "*.arpa"
    - "time.*.com"
    - "ntp.*.com"
    - "+.market.xiaomi.com"
    - "localhost.ptlogin2.qq.com"
    - "*.msftncsi.com"
    - "www.msftconnecttest.com"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    - 8.8.8.8
  fallback: []
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr: [240.0.0.0/4]
  # 核心策略：DNS 分流
  # 逻辑：国内域名 -> 阿里/腾讯 DoH；国外域名 -> Google/Cloudflare DoH
  nameserver-policy:
    "geosite:cn,private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
    "geosite:geolocation-!cn":
      - https://dns.google/dns-query
      - https://1.1.1.1/dns-query

# ==================== 3. 配置锚点 (Anchors) ====================
# 说明：以下带 & 符号的块是“模板”，后续配置中用 * 符号引用，方便统一管理

# [模板 1] 通用节点过滤
# 作用：从订阅中剔除无效、过期、广告或非节点类的条目
p: &common_filter
  include-all: true
  exclude-filter: "(?i)Traffic|Expire|Premium|频道|订阅|ISP|流量|到期|重置|请勿|剩余|套餐|跳转|官网|运营|更新"

# [模板 2] 通用优选策略
# 逻辑：优先自动测速，其次手动干预，最后按地区兜底
pg_auto: &pg_auto
  - 自动选择
  - 节点选择
  - 手动切换
  - 香港节点
  - 台湾节点
  - 美国节点
  - 日本节点
  - 新加坡节点
  - 英国节点
  - 韩国节点
  - 澳大利亚节点
  - 俄罗斯节点
  - 其他节点
  - DIRECT

# [模板 3] AI 专用高优先级策略
# 逻辑：美国优先 (OpenAI/Claude 最佳实践) > 日本/新加坡 (低延迟备选)
pg_ai: &pg_ai
  - 美国节点
  - 日本节点
  - 新加坡节点
  - 手动切换
  - 自动选择
  - 节点选择
  - 香港节点
  - 台湾节点
  - 英国节点
  - 韩国节点
  - 澳大利亚节点
  - 俄罗斯节点
  - 其他节点
  - DIRECT

# ==================== 4. 订阅来源 (Proxy Providers) ====================
proxy-providers:
  订阅_NCloud:
    type: http
    url: "https://saas.cloudclasscaas.com/api/v1/client/subscribe?token=ktu04Lv1UaNGvKYPFIc372ZxwnstQJgw&flag=meta&types=all"
    interval: 3600
    path: ./proxies/sub1.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
  订阅_飞狗:
    type: http
    url: "https://fg88.whtjdasha.com/api/v1/client/subscribe?token=fec75658baa1bcf58cdff7313812ebba&flag=meta&types=all"
    interval: 3600
    path: ./proxies/sub2.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
  订阅_赔钱:
    type: http
    url: "https://dash.pqjc.site/api/v1/pq/c731d908609091b8a046b5b1aa536d00"
    interval: 3600
    path: ./proxies/sub3.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

# ==================== 5. 规则集 (Rule Providers) ====================
rule-providers:
  # --- 1. 基础防护 & 广告拦截 ---
  LocalAreaNetwork:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/LocalAreaNetwork.list"
    path: ./ruleset/LocalAreaNetwork.list
    interval: 86400
  UnBan:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/UnBan.list"
    path: ./ruleset/UnBan.list
    interval: 86400
  BanAD:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanAD.list"
    path: ./ruleset/BanAD.list
    interval: 86400
  BanProgramAD:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanProgramAD.list"
    path: ./ruleset/BanProgramAD.list
    interval: 86400
    
  # --- 2. 操作系统 & 生态 ---
  Microsoft:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Microsoft.list"
    path: ./ruleset/Microsoft.list
    interval: 86400
  MicrosoftEdge:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/MicrosoftEdge/MicrosoftEdge.yaml"
    path: ./ruleset/MicrosoftEdge.yaml
    interval: 86400
  Apple:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Apple.list"
    path: ./ruleset/Apple.list
    interval: 86400
  WeChat:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/WeChat/WeChat.list"
    path: ./ruleset/WeChat.list
    interval: 86400
    
  # --- 3. Google & 搜索服务 ---
  GoogleFCM:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/GoogleFCM.list"
    path: ./ruleset/GoogleFCM.list
    interval: 86400
  GoogleCN:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/GoogleCN.list"
    path: ./ruleset/GoogleCN.list
    interval: 86400
  google_domain:
    type: http
    behavior: domain
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/google.yaml"
    path: ./ruleset/google_domain.yaml
    interval: 86400
  google_ip:
    type: http
    behavior: ipcidr
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/google.yaml"
    path: ./ruleset/google_ip.yaml
    interval: 86400
  Bing:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Bing.list"
    path: ./ruleset/Bing.list
    interval: 86400
  bing:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Bing/Bing.yaml"
    path: ./ruleset/bing.yaml
    interval: 86400
  OneDrive:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/OneDrive.list"
    path: ./ruleset/OneDrive.list
    interval: 86400
    
  # --- 4. AIGC (人工智能) ---
  OpenAi:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml"
    path: ./ruleset/openai.yaml
    interval: 86400
  Openai:
    type: http
    behavior: domain
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/openai.yaml"
    path: ./ruleset/Openai.yaml
    interval: 86400
  Gemini:
    type: http
    behavior: domain
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/google-gemini.yaml"
    path: ./ruleset/Gemini.yaml
    interval: 86400
  gemini:
    type: http
    behavior: classical
    format: yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml"
    path: ./ruleset/gemini.yaml
    interval: 86400
  copilot:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Copilot/Copilot.yaml"
    path: ./ruleset/copilot.yaml
    interval: 86400
  claude:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Claude/Claude.yaml"
    path: ./ruleset/claude.yaml
    interval: 86400
  bard:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BardAI/BardAI.yaml"
    path: ./ruleset/bard.yaml
    interval: 86400
  perplexity:
    type: http
    behavior: domain
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/perplexity.yaml"
    path: ./ruleset/perplexity.yaml
    interval: 86400
    
  # --- 5. 生产力 & 办公 ---
  Notion:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Notion/Notion.yaml"
    path: ./ruleset/notion.yaml
    interval: 86400
  GitHub:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GitHub/GitHub.yaml"
    path: ./ruleset/GitHub.yaml
    interval: 86400
  Adobe:
    type: http
    behavior: domain
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/adobe.yaml"
    path: ./ruleset/adobe.yaml
    interval: 86400
    
  # --- 6. 社交网络 ---
  telegram_ip:
    type: http
    behavior: ipcidr
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/telegram.yaml"
    path: ./ruleset/telegram_ip.yaml
    interval: 86400
  telegram_domain:
    type: http
    behavior: domain
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/telegram.yaml"
    path: ./ruleset/telegram_domain.yaml
    interval: 86400
  x:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Twitter/Twitter.yaml"
    path: ./ruleset/x.yaml
    interval: 86400
  Instagram:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Instagram/Instagram.yaml"
    path: ./ruleset/Instagram.yaml
    interval: 86400
  Threads:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Threads/Threads.yaml"
    path: ./ruleset/Threads.yaml
    interval: 86400
  reddit:
    type: http
    behavior: domain
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/reddit.yaml"
    path: ./ruleset/reddit.yaml
    interval: 86400
  Discord:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Discord/Discord.yaml"
    path: ./ruleset/discord.yaml
    interval: 86400
    
  # --- 7. 流媒体 ---
  Spotify:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Spotify/Spotify.yaml"
    path: ./ruleset/Spotify.yaml
    interval: 86400
  YouTube:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/YouTube.list"
    path: ./ruleset/YouTube.list
    interval: 86400
  Netflix:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Netflix.list"
    path: ./ruleset/Netflix.list
    interval: 86400
  TikTok:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/TikTok/TikTok.yaml"
    path: ./ruleset/tiktok.yaml
    interval: 86400
  Disney:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Disney/Disney.yaml"
    path: ./ruleset/disney.yaml
    interval: 86400
  PrimeVideo:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/PrimeVideo/PrimeVideo.yaml"
    path: ./ruleset/primevideo.yaml
    interval: 86400
  HBO:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/HBO/HBO.yaml"
    path: ./ruleset/hbo.yaml
    interval: 86400
    
  # --- 8. 游戏 ---
  Steam:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Steam/Steam.yaml"
    path: ./ruleset/steam.yaml
    interval: 86400
  SteamCN:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/SteamCN.list"
    path: ./ruleset/SteamCN.list
    interval: 86400
  Epic:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Epic.list"
    path: ./ruleset/Epic.list
    interval: 86400
  Sony:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Sony.list"
    path: ./ruleset/Sony.list
    interval: 86400
  Nintendo:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Nintendo.list"
    path: ./ruleset/Nintendo.list
    interval: 86400
  Bahamut:
    type: http
    behavior: classical
    format: yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml"
    path: ./ruleset/Bahamut.yaml
    interval: 86400
  BilibiliHMT:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/BilibiliHMT.list"
    path: ./ruleset/BilibiliHMT.list
    interval: 86400
  Bilibili:
    type: http
    behavior: classical
    format: yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml"
    path: ./ruleset/Bilibili.yaml
    interval: 86400
  NetEaseMusic:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/NetEaseMusic.list"
    path: ./ruleset/NetEaseMusic.list
    interval: 86400
  Origin:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Origin.list"
    path: ./ruleset/Origin.list
    interval: 86400
    
  # --- 9. 地区与直连 (GEOIP) ---
  private:
    type: http
    behavior: domain
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/private.yaml"
    path: ./ruleset/private.yaml
    interval: 86400
  cn_domain:
    type: http
    behavior: domain
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/cn.yaml"
    path: ./ruleset/cn_domain.yaml
    interval: 86400
  ChinaDomain:
    type: http
    behavior: domain
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ChinaDomain.list"
    path: ./ruleset/ChinaDomain.list
    interval: 86400
  ChinaCompanyIp:
    type: http
    behavior: ipcidr
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ChinaCompanyIp.list"
    path: ./ruleset/ChinaCompanyIp.list
    interval: 86400
  "geolocation-!cn":
    type: http
    behavior: domain
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/geolocation-!cn.yaml"
    path: ./ruleset/geolocation-!cn.yaml
    interval: 86400
  cn_ip:
    type: http
    behavior: ipcidr
    format: yaml
    url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/cn.yaml"
    path: ./ruleset/cn_ip.yaml
    interval: 86400
  freedom:
    type: http
    behavior: domain
    format: yaml
    url: "https://raw.githubusercontent.com/lamgience/Clash/refs/heads/clash_rules/freedom.yaml"
    path: ./ruleset/freedom.yaml
    interval: 86400
  direct_cus:
    type: http
    behavior: domain
    format: yaml
    url: "https://raw.githubusercontent.com/lamgience/Clash/refs/heads/clash_rules/Direct_wi.yaml"
    path: ./ruleset/Direct_wi.yaml
    interval: 86400
  Airport:
    type: http
    behavior: domain
    format: yaml
    url: "https://raw.githubusercontent.com/lamgience/Clash/refs/heads/clash_rules/Airport.yaml"
    path: ./ruleset/Airport.yaml
    interval: 86400
  ChinaMedia:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ChinaMedia.list"
    path: ./ruleset/ChinaMedia.list
    interval: 86400
  ProxyMedia:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ProxyMedia.list"
    path: ./ruleset/ProxyMedia.list
    interval: 86400
  GlobalMedia:
    type: http
    behavior: classical
    format: yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GlobalMedia/GlobalMedia.yaml"
    path: ./ruleset/globalmedia.yaml
    interval: 86400
  ProxyGFWlist:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ProxyGFWlist.list"
    path: ./ruleset/ProxyGFWlist.list
    interval: 86400
  Download:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Download.list"
    path: ./ruleset/Download.list
    interval: 86400

# ==================== 6. 策略组 (Proxy Groups) ====================
proxy-groups:
  # --- 1. 核心控制组 ---

  - name: 手动切换
    type: select
    icon: https://testingcf.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/select.png
    <<: *common_filter
    # 【Master 组】包含所有地区组 + 自动读取的订阅全量节点
    proxies:
      - 香港节点
      - 台湾节点
      - 美国节点
      - 日本节点
      - 新加坡节点
      - 英国节点
      - 韩国节点
      - 澳大利亚节点
      - 俄罗斯节点
      - 其他节点

  - name: 自动选择
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Auto.png
    <<: *common_filter

  - name: 节点选择
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Proxy.png
    <<: *common_filter
    proxies:
      - 自动选择
      - 手动切换
      - 香港节点
      - 台湾节点
      - 美国节点
      - 日本节点
      - 新加坡节点
      - 英国节点
      - 韩国节点
      - 澳大利亚节点
      - 俄罗斯节点
      - 其他节点
      - DIRECT

  # --- 2. AI 专用组 (引用 *pg_ai 模板) ---
  
  - name: AIGC
    type: select
    icon: https://img.icons8.com/?size=100&id=mSC3ebe4W6w6&format=png&color=000000
    proxies: *pg_ai

  - name: Gemini
    type: select
    icon: https://img.icons8.com/?size=100&id=ETVUfl0Ylh1p&format=png&color=000000
    proxies: *pg_ai

  - name: OpenAi
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/OpenAI.png
    proxies: *pg_ai

  - name: Copilot
    type: select
    icon: https://img.icons8.com/?size=100&id=A5L2E9lJjaSB&format=png&color=000000
    proxies: *pg_ai

  - name: Claude
    type: select
    icon: https://img.icons8.com/?size=100&id=kDfpmWz6OSCQ&format=png&color=000000
    proxies: *pg_ai

  # --- 3. 通用应用组 (引用 *pg_auto 模板) ---

  - name: Notion
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Notion.png
    proxies: *pg_auto

  - name: GitHub
    type: select
    icon: https://img.icons8.com/?size=100&id=LoL4bFzqmAa0&format=png&color=000000
    proxies: *pg_auto

  - name: Adobe
    type: select
    icon: https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons/svg/adobe.svg
    proxies: *pg_auto

  - name: 微软
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Microsoft.png
    proxies: *pg_auto

  - name: 谷歌
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Google_Search.png
    proxies: *pg_auto

  - name: Telegram
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Telegram.png
    proxies: *pg_auto

  - name: 国外社交
    type: select
    icon: https://img.icons8.com/?size=100&id=ZNMifeqJbPRv&format=png&color=000000
    proxies: *pg_auto

  - name: 国外媒体
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/ForeignMedia.png
    proxies: *pg_auto

  - name: YouTube
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png
    proxies: *pg_auto

  - name: Netflix
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Netflix.png
    proxies:
      - 奈飞节点
      - 自动选择
      - 节点选择
      - 手动切换
      - 香港节点
      - 台湾节点
      - 美国节点
      - 日本节点
      - 新加坡节点
      - 英国节点
      - 韩国节点
      - 澳大利亚节点
      - 俄罗斯节点
      - 其他节点
      - DIRECT

  - name: Spotify
    type: select
    icon: https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons/svg/spotify.svg
    proxies: *pg_auto

  - name: 游戏平台
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Game.png
    proxies: *pg_auto

  - name: 自由意志
    type: select
    icon: https://img.icons8.com/?size=100&id=kYqbEzjS6EBh&format=png&color=000000
    proxies: *pg_auto

  # --- 4. 国内与直连组 ---

  - name: 国内媒体
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/DomesticMedia.png
    proxies:
      - 节点选择
      - 自动选择
      - 手动切换
      - 香港节点
      - 台湾节点
      - 美国节点
      - 日本节点
      - 新加坡节点
      - 英国节点
      - 韩国节点
      - 澳大利亚节点
      - 俄罗斯节点
      - 其他节点
      - DIRECT

  - name: 苹果服务
    type: select
    icon: https://img.icons8.com/?size=100&id=fpDIWrTmgyvx&format=png&color=000000
    proxies:
      - DIRECT
      - 自动选择
      - 节点选择
      - 手动切换
      - 香港节点
      - 台湾节点
      - 美国节点
      - 日本节点
      - 新加坡节点
      - 英国节点
      - 韩国节点
      - 澳大利亚节点
      - 俄罗斯节点
      - 其他节点

  - name: 微信
    type: select
    icon: https://img.icons8.com/?size=100&id=qXin8dFXNXBX&format=png&color=000000
    proxies:
      - DIRECT
      - 自动选择
      - 节点选择
      - 手动切换
      - 香港节点
      - 台湾节点
      - 美国节点
      - 日本节点
      - 新加坡节点
      - 英国节点
      - 韩国节点
      - 澳大利亚节点
      - 俄罗斯节点
      - 其他节点

  - name: 哔哩哔哩
    type: select
    icon: https://img.icons8.com/?size=100&id=l87yXVtzuGWB&format=png&color=000000
    proxies:
      - DIRECT
      - 节点选择
      - 自动选择
      - 香港节点
      - 台湾节点

  - name: 网易音乐
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Netease_Music.png
    filter: "(?i)网易|音乐|NetEase|Music"
    <<: *common_filter
    proxies:
      - DIRECT
      - 节点选择
      - 自动选择

  - name: 哔哩哔哩港澳台
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/bilibili.png
    proxies:
      - 节点选择
      - 自动选择
      - 手动切换
      - 香港节点
      - 台湾节点
      - 全球直连
      - DIRECT

  - name: 巴哈姆特
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Bahamut.png
    proxies:
      - 节点选择
      - 手动切换
      - 台湾节点
      - DIRECT

  - name: 机场专线
    type: select
    icon: https://img.icons8.com/?size=100&id=guJpUesVT0mI&format=png&color=000000
    proxies:
      - DIRECT
      - 自动选择
      - 节点选择
      - 手动切换
      - 香港节点
      - 台湾节点
      - 美国节点
      - 日本节点
      - 新加坡节点
      - 英国节点
      - 韩国节点
      - 澳大利亚节点
      - 俄罗斯节点
      - 其他节点

  - name: 全球直连
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Direct.png
    proxies:
      - DIRECT
      - 节点选择
      - 自动选择

  - name: 广告拦截
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/AdBlack.png
    proxies:
      - REJECT
      - DIRECT

  - name: 应用净化
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hijacking.png
    proxies:
      - REJECT
      - DIRECT

  - name: 漏网之鱼
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final.png
    proxies: *pg_auto

    # --- 5. 自动地区分组 (正则筛选) ---
    # 核心原理：使用正则表达式 ((?i)关键词) 扫描所有订阅节点，符合条件的自动归入该组
  
  - name: 香港节点
    type: url-test